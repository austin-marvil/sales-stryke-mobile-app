"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EntityMongoRefUtils = void 0;
const log_1 = require("../log");
const LogManager_1 = require("../log/LogManager");
const NAMESPACE = "com.salesstryke.utils.entity.EntityMongoRefUtils";
const LOGGER = LogManager_1.LogManager.getLogger(NAMESPACE);
LOGGER.setLogLevel(log_1.Level.WARNING);
class EntityMongoRefUtils {
    // Utility function to handle add and delete operations for JsonApiPersistableBase
    static updateMongoRefConnectorItems(p) {
        const { existingItems, newItems, createAction, deleteAction, compareAction } = p;
        // Step 1: Add new items
        newItems.forEach((newItem) => {
            const existing = existingItems.find((existingItem) => compareAction(existingItem, newItem));
            if (!existing) {
                createAction(newItem); // If not found, add as a new item
            }
        });
        // Step 2: Delete items that are not in the new list
        existingItems.forEach((existingItem) => {
            const isNotInNewList = !newItems.some((newItem) => compareAction(existingItem, newItem));
            if (isNotInNewList) {
                deleteAction(existingItem); // If not in the new list, delete it
            }
        });
    }
}
exports.EntityMongoRefUtils = EntityMongoRefUtils;
//# sourceMappingURL=EntityMongoRefUtils.js.map